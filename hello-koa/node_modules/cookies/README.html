<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hero orange</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Cookies
Cookies is a node.js module for getting and setting HTTP(S) cookies. Cookies can be signed to prevent tampering, using Keygrip. It can be used with the built-in node.js HTTP library, or as Con">
<meta property="og:type" content="website">
<meta property="og:title" content="Hero orange">
<meta property="og:url" content="http://yoursite.com/hello-koa/node_modules/cookies/README.html">
<meta property="og:site_name" content="Hero orange">
<meta property="og:description" content="Cookies
Cookies is a node.js module for getting and setting HTTP(S) cookies. Cookies can be signed to prevent tampering, using Keygrip. It can be used with the built-in node.js HTTP library, or as Con">
<meta property="og:image" content="https://img.shields.io/npm/v/cookies.svg">
<meta property="og:image" content="https://img.shields.io/npm/dm/cookies.svg">
<meta property="og:image" content="https://img.shields.io/node/v/cookies.svg">
<meta property="og:image" content="https://img.shields.io/travis/pillarjs/cookies/master.svg">
<meta property="og:image" content="https://img.shields.io/coveralls/pillarjs/cookies/master.svg">
<meta property="og:updated_time" content="2016-11-13T06:51:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hero orange">
<meta name="twitter:description" content="Cookies
Cookies is a node.js module for getting and setting HTTP(S) cookies. Cookies can be signed to prevent tampering, using Keygrip. It can be used with the built-in node.js HTTP library, or as Con">
<meta name="twitter:image" content="https://img.shields.io/npm/v/cookies.svg">
  
    <link rel="alternate" href="/atom.xml" title="Hero orange" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hero orange</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/hello-koa/node_modules/cookies/README.html" class="article-date">
  <time datetime="2017-03-28T06:46:01.000Z" itemprop="datePublished">2017-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h1><p><a href="https://npmjs.org/package/cookies" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/cookies.svg" alt="NPM Version"></a><br><a href="https://npmjs.org/package/cookies" target="_blank" rel="external"><img src="https://img.shields.io/npm/dm/cookies.svg" alt="NPM Downloads"></a><br><a href="https://nodejs.org/en/download/" target="_blank" rel="external"><img src="https://img.shields.io/node/v/cookies.svg" alt="Node.js Version"></a><br><a href="https://travis-ci.org/pillarjs/cookies" target="_blank" rel="external"><img src="https://img.shields.io/travis/pillarjs/cookies/master.svg" alt="Build Status"></a><br><a href="https://coveralls.io/r/pillarjs/cookies?branch=master" target="_blank" rel="external"><img src="https://img.shields.io/coveralls/pillarjs/cookies/master.svg" alt="Test Coverage"></a></p>
<p>Cookies is a <a href="http://nodejs.org/" target="_blank" rel="external">node.js</a> module for getting and setting HTTP(S) cookies. Cookies can be signed to prevent tampering, using <a href="https://www.npmjs.com/package/keygrip" target="_blank" rel="external">Keygrip</a>. It can be used with the built-in node.js HTTP library, or as Connect/Express middleware.</p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p>This is a <a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a> module available through the<br><a href="https://www.npmjs.com/" target="_blank" rel="external">npm registry</a>. Installation is done using the<br><a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally" target="_blank" rel="external"><code>npm install</code> command</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install cookies</div></pre></td></tr></table></figure>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul>
<li><p><strong>Lazy</strong>: Since cookie verification against multiple keys could be expensive, cookies are only verified lazily when accessed, not eagerly on each request.</p>
</li>
<li><p><strong>Secure</strong>: All cookies are <code>httponly</code> by default, and cookies sent over SSL are <code>secure</code> by default. An error will be thrown if you try to send secure cookies over an insecure socket.</p>
</li>
<li><p><strong>Unobtrusive</strong>: Signed cookies are stored the same way as unsigned cookies, instead of in an obfuscated signing format. An additional signature cookie is stored for each signed cookie, using a standard naming convention (<em>cookie-name</em><code>.sig</code>). This allows other libraries to access the original cookies without having to know the signing mechanism.</p>
</li>
<li><p><strong>Agnostic</strong>: This library is optimized for use with <a href="https://www.npmjs.com/package/keygrip" target="_blank" rel="external">Keygrip</a>, but does not require it; you can implement your own signing scheme instead if you like and use this library only to read/write cookies. Factoring the signing into a separate library encourages code reuse and allows you to use the same signing library for other areas where signing is needed, such as in URLs.</p>
</li>
</ul>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="cookies-new-Cookies-request-response-options"><a href="#cookies-new-Cookies-request-response-options" class="headerlink" title="cookies = new Cookies( request, response, [ options ] )"></a>cookies = new Cookies( request, response, [ options ] )</h3><p>This creates a cookie jar corresponding to the current <em>request</em> and <em>response</em>, additionally passing an object <em>options</em>.</p>
<p>A <a href="https://www.npmjs.com/package/keygrip" target="_blank" rel="external">Keygrip</a> object or an array of keys can optionally be passed as <em>options.keys</em> to enable cryptographic signing based on SHA1 HMAC, using rotated credentials.</p>
<p>A Boolean can optionally be passed as <em>options.secure</em> to explicitally specify if the connection is secure, rather than this module examining <em>request</em>.</p>
<p>Note that since this only saves parameters without any other processing, it is very lightweight. Cookies are only parsed on demand when they are accessed.</p>
<h3 id="express-createServer-Cookies-express-keys"><a href="#express-createServer-Cookies-express-keys" class="headerlink" title="express.createServer( Cookies.express( keys ) )"></a>express.createServer( Cookies.express( keys ) )</h3><p>This adds cookie support as a Connect middleware layer for use in Express apps, allowing inbound cookies to be read using <code>req.cookies.get</code> and outbound cookies to be set using <code>res.cookies.set</code>.</p>
<h3 id="cookies-get-name-options"><a href="#cookies-get-name-options" class="headerlink" title="cookies.get( name, [ options ] )"></a>cookies.get( name, [ options ] )</h3><p>This extracts the cookie with the given name from the <code>Cookie</code> header in the request. If such a cookie exists, its value is returned. Otherwise, nothing is returned.</p>
<p><code>{ signed: true }</code> can optionally be passed as the second parameter <em>options</em>. In this case, a signature cookie (a cookie of same name ending with the <code>.sig</code> suffix appended) is fetched. If no such cookie exists, nothing is returned.</p>
<p>If the signature cookie <em>does</em> exist, the provided <a href="https://www.npmjs.com/package/keygrip" target="_blank" rel="external">Keygrip</a> object is used to check whether the hash of <em>cookie-name</em>=<em>cookie-value</em> matches that of any registered key:</p>
<ul>
<li>If the signature cookie hash matches the first key, the original cookie value is returned.</li>
<li>If the signature cookie hash matches any other key, the original cookie value is returned AND an outbound header is set to update the signature cookie’s value to the hash of the first key. This enables automatic freshening of signature cookies that have become stale due to key rotation.</li>
<li>If the signature cookie hash does not match any key, nothing is returned, and an outbound header with an expired date is used to delete the cookie.</li>
</ul>
<h3 id="cookies-set-name-value-options"><a href="#cookies-set-name-value-options" class="headerlink" title="cookies.set( name, [ value ], [ options ] )"></a>cookies.set( name, [ value ], [ options ] )</h3><p>This sets the given cookie in the response and returns the current context to allow chaining.</p>
<p>If the <em>value</em> is omitted, an outbound header with an expired date is used to delete the cookie.</p>
<p>If the <em>options</em> object is provided, it will be used to generate the outbound cookie header as follows:</p>
<ul>
<li><code>maxAge</code>: a number representing the milliseconds from <code>Date.now()</code> for expiry</li>
<li><code>expires</code>: a <code>Date</code> object indicating the cookie’s expiration date (expires at the end of session by default).</li>
<li><code>path</code>: a string indicating the path of the cookie (<code>/</code> by default).</li>
<li><code>domain</code>: a string indicating the domain of the cookie (no default).</li>
<li><code>secure</code>: a boolean indicating whether the cookie is only to be sent over HTTPS (<code>false</code> by default for HTTP, <code>true</code> by default for HTTPS).</li>
<li><code>httpOnly</code>: a boolean indicating whether the cookie is only to be sent over HTTP(S), and not made available to client JavaScript (<code>true</code> by default).</li>
<li><code>signed</code>: a boolean indicating whether the cookie is to be signed (<code>false</code> by default). If this is true, another cookie of the same name with the <code>.sig</code> suffix appended will also be sent, with a 27-byte url-safe base64 SHA1 value representing the hash of <em>cookie-name</em>=<em>cookie-value</em> against the first <a href="https://www.npmjs.com/package/keygrip" target="_blank" rel="external">Keygrip</a> key. This signature key is used to detect tampering the next time a cookie is received.</li>
<li><code>overwrite</code>: a boolean indicating whether to overwrite previously set cookies of the same name (<code>false</code> by default). If this is true, all cookies set during the same request with the same name (regardless of path or domain) are filtered out of the Set-Cookie header when setting this cookie.</li>
</ul>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http    = <span class="built_in">require</span>( <span class="string">"http"</span> )</div><div class="line"><span class="keyword">var</span> Cookies = <span class="built_in">require</span>( <span class="string">"cookies"</span> )</div><div class="line"></div><div class="line">server = http.createServer( <span class="function"><span class="keyword">function</span>(<span class="params"> req, res </span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> cookies = <span class="keyword">new</span> Cookies( req, res, &#123; <span class="string">"keys"</span>: keys &#125; )</div><div class="line">    , unsigned, signed, tampered</div><div class="line"></div><div class="line">  <span class="keyword">if</span> ( req.url == <span class="string">"/set"</span> ) &#123;</div><div class="line">    cookies</div><div class="line">      <span class="comment">// set a regular cookie</span></div><div class="line">      .set( <span class="string">"unsigned"</span>, <span class="string">"foo"</span>, &#123; <span class="attr">httpOnly</span>: <span class="literal">false</span> &#125; )</div><div class="line"></div><div class="line">      <span class="comment">// set a signed cookie</span></div><div class="line">      .set( <span class="string">"signed"</span>, <span class="string">"bar"</span>, &#123; <span class="attr">signed</span>: <span class="literal">true</span> &#125; )</div><div class="line"></div><div class="line">      <span class="comment">// mimic a signed cookie, but with a bogus signature</span></div><div class="line">      .set( <span class="string">"tampered"</span>, <span class="string">"baz"</span> )</div><div class="line">      .set( <span class="string">"tampered.sig"</span>, <span class="string">"bogus"</span> )</div><div class="line"></div><div class="line">    res.writeHead( <span class="number">302</span>, &#123; <span class="string">"Location"</span>: <span class="string">"/"</span> &#125; )</div><div class="line">    <span class="keyword">return</span> res.end( <span class="string">"Now let's check."</span> )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  unsigned = cookies.get( <span class="string">"unsigned"</span> )</div><div class="line">  signed = cookies.get( <span class="string">"signed"</span>, &#123; <span class="attr">signed</span>: <span class="literal">true</span> &#125; )</div><div class="line">  tampered = cookies.get( <span class="string">"tampered"</span>, &#123; <span class="attr">signed</span>: <span class="literal">true</span> &#125; )</div><div class="line"></div><div class="line">  assert.equal( unsigned, <span class="string">"foo"</span> )</div><div class="line">  assert.equal( signed, <span class="string">"bar"</span> )</div><div class="line">  assert.notEqual( tampered, <span class="string">"baz"</span> )</div><div class="line">  assert.equal( tampered, <span class="literal">undefined</span> )</div><div class="line"></div><div class="line">  res.writeHead( <span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125; )</div><div class="line">  res.end(</div><div class="line">    <span class="string">"unsigned expected: foo\n\n"</span> +</div><div class="line">    <span class="string">"unsigned actual: "</span> + unsigned + <span class="string">"\n\n"</span> +</div><div class="line">    <span class="string">"signed expected: bar\n\n"</span> +</div><div class="line">    <span class="string">"signed actual: "</span> + signed + <span class="string">"\n\n"</span> +</div><div class="line">    <span class="string">"tampered expected: undefined\n\n"</span>+</div><div class="line">    <span class="string">"tampered: "</span> + tampered + <span class="string">"\n\n"</span></div><div class="line">  )</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><a href="LICENSE">MIT</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/hello-koa/node_modules/cookies/README.html" data-id="cj1bttwp5003bmxs6daanu8mj" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
    
  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Date对象的方法/">Date对象的方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/终端命令/">终端命令</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Date对象的方法/" style="font-size: 10px;">Date对象的方法</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/小程序/" style="font-size: 10px;">小程序</a> <a href="/tags/终端命令/" style="font-size: 10px;">终端命令</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/27/前端插件综述/">前端插件综述</a>
          </li>
        
          <li>
            <a href="/2017/02/15/Date-parse的使用/">如何比较两个时间大小</a>
          </li>
        
          <li>
            <a href="/2017/02/10/mac终端命令汇总/">mac终端命令汇总</a>
          </li>
        
          <li>
            <a href="/2017/02/09/小程序之学习笔记/">小程序之学习笔记</a>
          </li>
        
          <li>
            <a href="/2017/02/08/React基本写法总结/">React基本写法总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 春光里的小橘子<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>